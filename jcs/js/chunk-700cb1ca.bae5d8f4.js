(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-700cb1ca"],{"14ce":function(e,t,i){},"197d":function(e,t,i){"use strict";i.r(t);var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"buttons"},[i("div",{staticClass:"buttons"},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:7}},[i("el-input",{attrs:{placeholder:"请输入标题",clearable:""},on:{clear:e.getUsongList},model:{value:e.songtitle,callback:function(t){e.songtitle=t},expression:"songtitle"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUsongList},slot:"append"})],1)],1),i("el-col",{attrs:{span:4,id:"user_add"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.addsong}},[e._v("添加妙音")])],1)],1)],1)]),i("div",{staticClass:"mian"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.ofloading,expression:"ofloading"}],staticStyle:{width:"100%"},attrs:{data:e.songData,"row-class-name":"warning-row",border:"","element-loading-text":"正在获取列表，请稍等..."}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),i("el-table-column",{attrs:{prop:"title",label:"标题"}}),i("el-table-column",{attrs:{prop:"synopsis",label:"简介"}}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(i){return e.handleEdit(t.$index,t.row.id)}}}),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(i){return e.handleDelete(t.$index,t.row.id)}}})]}}])})],1),i("CtrlPage",{directives:[{name:"show",rawName:"v-show",value:0<e.songData.length,expression:"0 < songData.length"}],ref:"page",attrs:{setPage:e.getList}})],1),i("el-dialog",{attrs:{title:"添加妙音",visible:e.songDataVisible,width:"50%"},on:{"update:visible":function(t){e.songDataVisible=t}}},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入活动标题"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),i("el-form-item",{attrs:{label:"简介",prop:"synopsis"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入简介",maxlength:"200","show-word-limit":""},model:{value:e.ruleForm.synopsis,callback:function(t){e.$set(e.ruleForm,"synopsis",t)},expression:"ruleForm.synopsis"}})],1),i("el-form-item",{attrs:{label:"上传音频",prop:"filePath"}},[i("el-input",{staticStyle:{display:"none !important"},model:{value:e.ruleForm.filePath,callback:function(t){e.$set(e.ruleForm,"filePath",t)},expression:"ruleForm.filePath"}}),i("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadUrl,"on-preview":e.addhandlePreview,"on-remove":e.handleRemove,"on-success":e.handleAvatarSuccess,"before-remove":e.beforeRemove,headers:e.importHeaders,limit:1,multiple:"",name:"files","on-exceed":e.handleExceed,"file-list":e.fileList}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选取文件")])],1),i("audio",{attrs:{src:"",id:"eventAudio",controls:"",preload:""}},[e._v("您的浏览器不支持 audio 标签。")])],1),i("el-form-item",{staticStyle:{"margin-top":"30px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")]),i("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("取消")])],1)],1)],1),i("el-dialog",{attrs:{title:"编辑活动",visible:e.song,width:"50%"},on:{"update:visible":function(t){e.song=t}}},[i("el-form",{ref:"Form",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"标题：",prop:"title"}},[i("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),i("el-form-item",{attrs:{label:"简介：",prop:"synopsis"}},[i("el-input",{attrs:{type:"textarea",placeholder:"请输入简介",maxlength:"200","show-word-limit":""},model:{value:e.ruleForm.synopsis,callback:function(t){e.$set(e.ruleForm,"synopsis",t)},expression:"ruleForm.synopsis"}})],1),i("el-form-item",{attrs:{label:"上传文件：",prop:"picture"}},[i("el-input",{staticStyle:{display:"none !important"},model:{value:e.ruleForm.filePath,callback:function(t){e.$set(e.ruleForm,"filePath",t)},expression:"ruleForm.filePath"}}),i("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadUrl,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handleAvatarSuccess,"before-remove":e.beforeRemove,headers:e.importHeaders,limit:1,multiple:"",name:"files","on-exceed":e.handleExceed,"file-list":e.fileList}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选取文件")])],1)],1),i("audio",{attrs:{src:"",id:"eventAudio",controls:"",preload:""}},[e._v("您的浏览器不支持 audio 标签。")]),i("el-form-item",{staticStyle:{"margin-top":"30px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.redactForm("Form")}}},[e._v("确认编辑")]),i("el-button",{on:{click:function(t){return e.resetForm("Form")}}},[e._v("取消")])],1)],1)],1)],1)},s=[],o=(i("99af"),i("b0c0"),i("ed35")),n=i("5f87"),a={name:"",data:function(){return{songDataVisible:!1,dialogImageUrl:"",ofloading:!0,song:!1,songData:[],editorimg:[],editorimgFilesList:[],dialogVisible:!1,songFilesList:"",songtitle:"",ids:"",innerVisible:!1,Dateshijian:"",ruleForm:{filePath:"",synopsis:"",title:""},uploadUrl:"".concat(window.apiBase,"/file/uploadFiles"),importHeaders:{token:Object(n["a"])().token},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}],synopsis:[{required:!0,message:"请输入简介",trigger:"blur"}]},fileList:[]}},created:function(){},mounted:function(){this.$refs.page.getList(1)},methods:{handleClick:function(e){console.log("handleClick -> url",e);var t=document.getElementById("eventAudio");t.setAttribute("src",e),t.play()},handleAvatarSuccess:function(e,t){console.log("handleAvatarSuccess -> res, file",e,t),this.ruleForm.filePath=e.data[0]},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log("handlePreview -> file",e),this.handleClick(e.url)},addhandlePreview:function(e){this.handleClick(e.response.data)},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},handleChange:function(e,t){this.hideUpload=t.length>=this.limitCount,console.log("handleChange -> hideUpload",this.hideUpload)},handleEdit:function(e,t){var i=this;this.ids=t,this.songFilesList=[],this.$public.audioFileController.audioFileid(t).then((function(e){"000000"==e.code&&(i.ruleForm=e.data,i.fileList=[{name:"音频.mp3",url:e.data.filePath}],i.songFilesList=e.data.filePath,i.song=!0)}))},getUsongList:function(){this.$refs.page.getList(1)},addsong:function(){this.ruleForm={synopsis:"",title:"",filePath:""},this.fileList=[],this.songDataVisible=!0},getList:function(e,t,i){var l=this;this.$public.audioFileController.audioFileConditions({current:e,size:t,title:this.songtitle}).then((function(e){"000000"==e.code&&(l.songData=e.data.records,l.ofloading=!1,i(l.songData,+e.data.total))}))},submitForm:function(e){var t=this;this.handleClick(""),console.log("submitForm -> this.ruleForm",this.ruleForm),this.$refs[e].validate((function(i){if(!i)return console.log("error submit!!"),!1;t.$public.audioFileController.adsdaudioFile(t.ruleForm).then((function(i){"000000"==i.code&&(t.$$message({message:"添加成功！",type:"success"}),t.$refs[e].resetFields(),t.$refs.page.getList(1),t.songDataVisible=!1)}))}))},redactForm:function(e){var t=this;this.handleClick(""),console.log("redactForm -> formName",e);var i={filePath:this.ruleForm.filePath,synopsis:this.ruleForm.synopsis,title:this.ruleForm.title};this.$refs[e].validate((function(l){if(!l)return console.log("error submit!!"),!1;t.$public.audioFileController.putaudioFile(t.ids,i).then((function(i){"000000"==i.code&&(t.$$message({message:"修改成功！",type:"success"}),t.$refs[e].resetFields(),t.$refs.page.getList(1),t.song=!1)}))}))},resetForm:function(e){this.handleClick(""),this.song=!1,this.songDataVisible=!1,this.$refs[e].resetFields()},handleDelete:function(e,t){var i=this;this.$confirm("此操作将永久删除该文章, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.$public.audioFileController.DELETEaudioFile(t).then((function(e){console.log("handleDelete -> res",e),"000000"==e.code&&(i.$message({message:"恭喜你，删除成功",type:"success"}),i.$refs.page.getList(1))}))})).catch((function(){i.$message({type:"info",message:"已取消删除"})}))}},components:{CtrlPage:o["a"]}},r=a,u=(i("be82"),i("2877")),c=Object(u["a"])(r,l,s,!1,null,null,null);t["default"]=c.exports},be82:function(e,t,i){"use strict";var l=i("14ce"),s=i.n(l);s.a},ed35:function(e,t,i){"use strict";var l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-pagination",{attrs:{"current-page":e.pageIndex,"page-sizes":e.pageSizes,"page-size":e.rows,layout:"total, sizes, prev, pager, next, jumper",total:e.total,"prev-text":"上一页","next-text":"下一页"},on:{"size-change":e.onSizeChange,"current-change":e.onCurrentChange}})},s=[],o=(i("a9e3"),{props:{pageSizes:{type:Array,default:function(){return[5,10,20,50,100]}},rows:{type:Number,default:10},setPage:{type:Function}},watch:{rows:function(){this.currentRows=this.rows}},data:function(){return{currentRows:this.rows,pageIndex:1,total:0}},methods:{onSizeChange:function(e){this.currentRows=e,this.getList(1)},onCurrentChange:function(e){this.getList(e)},setResultCallback:function(e,t){0==e.length&&this.pageIndex>1?this.getList(this.pageIndex-1):this.total=t},getList:function(e){this.setPage&&(this.pageIndex=e,this.setPage(e,this.currentRows,this.setResultCallback))},refresh:function(){this.getList(this.pageIndex)}}}),n=o,a=i("2877"),r=Object(a["a"])(n,l,s,!1,null,null,null);t["a"]=r.exports}}]);